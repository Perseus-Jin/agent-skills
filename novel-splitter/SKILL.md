---
name: novel-splitter
description: 按章节拆分长篇小说txt文件的工具。支持自动检测章节格式（第X章、Chapter X等），支持自定义分隔符，保留原文件编码，输出文件命名为"第X章.txt"，内容为纯正文无标题。用于处理需要将完整小说拆分为独立章节文件的场景。
---

# Novel Splitter Skill

将长篇小说的txt文件按章节拆分成多个独立的txt文件。

## 使用场景

当用户需要：
- 将完整的小说txt文件拆分成单个章节文件
- 处理从网站下载的整本小说
- 按章节管理和阅读长篇小说
- 自动化小说文件的整理工作

## 快速开始

**自动检测并拆分（推荐）**
```
split_novel.py novel.txt
```

**指定输出目录**
```
split_novel.py novel.txt -o ./chapters
```

**使用自定义章节模式**
```
split_novel.py novel.txt -p "^第\\d+章"
```

## 核心功能

### 1. 自动章节检测

内置多种章节格式识别（按优先级）：
- `第X章` / `第XX章` - 中文数字（第1章、第一百二十三章）
- `第数字章` - 阿拉伯数字（第12章、第205章）
- `Chapter X` - 英文Chapter格式
- `1. 2.` / `1 2.` - 数字序号格式

### 2. 自定义章节分隔符

当自动检测失败时，使用 `-p` 参数指定自定义正则表达式：

```
# 匹配"第1章"格式
-p "^第\\d+章"

# 匹配"Chapter 1"格式
-p "^Chapter\\s+\\d+"

# 匹配"一、第一章"格式
-p "^第[零一二三四五六七八九十百千]+章"
```

### 3. 编码处理

自动检测文件编码：UTF-8、GBK、GB2312、Big5、Shift_JIS

手动指定编码：
```
split_novel.py novel.txt -e gbk
```

### 4. 文件命名

输出文件使用统一命名格式 `第XXXX章.txt`：
```
第0001章.txt
第0012章.txt
第0234章.txt
```

## 命令行参数

| 参数 | 说明 |
|------|------|
| `input` | 输入的小说文件路径（必需） |
| `-o, --output` | 输出目录（默认原文件同级） |
| `-p, --pattern` | 自定义章节正则表达式 |
| `-e, --encoding` | 指定文件编码 |
| `-v, --verbose` | 显示详细信息 |

## 输出示例

```
输入: novel.txt (包含50章)
输出目录: ./正文/
  ├── 第0001章.txt
  ├── 第0002章.txt
  ├── ...
  └── 第0050章.txt
```

每个文件内容为纯正文，不包含章节标题头部。拆分后的文件保存在"正文"子文件夹中。

## 注意事项

1. **编码问题**：如果拆分后出现乱码，使用 `-e` 参数指定正确编码
2. **章节识别失败**：尝试 `-p` 参数提供自定义正则
3. **后记/尾声**：最后一个章节也会以"第XXXX章.txt"格式保存

## 技术细节

- 使用正则表达式进行章节匹配
- 自动检测并保留原始文件编码
- 输出文件为纯正文，无标题头部
- 支持GBK、Big5等中文编码
- 统一使用4位数字编号
